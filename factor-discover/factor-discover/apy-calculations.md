# APY Calculations

{% hint style="info" %}
**APY vs APR**

For convenience, Factor Studio utilizes both Annual Percentage Yield (APY) and Annual Percentage Rate (APR) depending on the context of the earnings generated.&#x20;

* **Annual Percentage Yield:** The rate of return (i.e. interest/yield) per year that takes into account any earnings that are compounded within the year.
* **Annual Percentage Rate:** The rate of return (i.e. interest/yield) per year.
{% endhint %}

## Total APY

$$
totalAPY=strategyAPY+scaleAPY+boostAPY
$$

The `totalAPY` provides an estimate of the yearly compounded returns that a depositor will receive by depositing into the specified strategy vault.  The `totalAPY` is the sum of APYs generated by the strategy as well as protocol rewards which are allocated to the vault via [Factor Scale](../../governance/factor-scale/) and [Factor Boost](../../governance/factor-boost/).

## Strategy/Net APY

The `strategyAPY` is the estimated yearly compounded returns that arise from the execution of the automated strategy. Consequently, the APY calculations differs depending on the strategy type.

### Leverage

$$
strategyNetValue_{USD} = strategyAssetValue_{USD} - strategyDebtValue_{USD}
$$

$$
strategyAPY = \frac{(\text{strategyAssetValue}_{USD}\times{\text{supplyAPY}})-(\text{strategyDebtValue}_{USD}\times{\text{borrowAPY}})}{strategyNetValue_{USD}}
$$

For [leverage strategies](../../getting-started/strategy-explainers/leverage/), the `strategyAPY` takes into account the costs of borrowing as well as any interest accrued from lending. The displayed `strategyAPY` is calculated based on the maximum leverage for that strategy:

$$
strategyAPY = \frac{(\text{strategyAssetValue}_{USD}\times{\text{supplyAPY}})-(\text{strategyMaxDebtValue}_{USD}\times{\text{borrowAPY}})}{strategyNetValue_{USD}}
$$

$$
strategyAPY = \frac{(\text{strategyAssetValue}_{USD}\times{\text{supplyAPY}})-(\text{strategyAssetValue}_{USD}\times{LTV_{max}}\times{\text{borrowAPY}})}{strategyNetValue_{USD}}
$$

The `positionAPY` for leverage strategies utilizes a similar approach where the leverage multiplier affects the position's `strategyAssetValue` and `strategyDebtValue`:

$$
positionAPY = \frac{(\text{positionAssetValue}_{USD}\times{\text{supplyAPY}})-(\text{positionDebtValue}_{USD}\times{\text{borrowAPY}})}{positionNetValue_{USD}}
$$

### Yield

$$
strategyAPY=\left(1+\frac{protocolAPR}{n}\right)^n-1
$$

For [yield strategies](../../getting-started/strategy-explainers/yield/), the `strategyAPY` is calculated by compounding the underlying protocol's APR by the frequency of reinvestments, $$n$$.

$$
positionAPY=\left(1+\frac{protocolAPR}{n}\right)^n-1
$$

As all liquidity within a yield strategy vault is fungible, the `strategyAPY` also represents the estimated yearly compounded returns for any positions within the strategy (i.e. the `positionAPY`).

## Factor Scale APY

[Factor Scale](../../governance/factor-scale/) emission rewards are linearly distributed as [esFCTR](../../governance/fctr-token/#esfctr) based on the proportion of votes that each strategy vault receives in the previous epoch (i.e. weekly) voting period. The total amount of esFCTR allocated as epoch rewards to Factor Scale vaults depends on the [emission milestones](../../governance/factor-scale/#fctr-emission-milestones) reached.

As Factor Scale emissions are only allocated to deposits within the epoch, the `scaleAPR` is calculated using information from the active epoch. Note that as there is a 90 day linear vesting schedule for esFCTR, Factor Scale rewards are not auto-compounded by the strategy vaults.



$$
vaultVotesProportion = \frac{voteCount_{vault}}{voteCount_{total}}
$$

$$
scaleRewards_{annual} = scaleRewards_{second}\times{secondsInYear}
$$

$$
scaleAPR = \frac{vaultVotesProportion\times{scaleRewards_{annual}}}{scaleVaultsTVL_{USD}}
$$

$$
scaleAPR = \frac{voteCount_{vault}}{voteCount_{total}}\times\frac{scaleRewards_{annual}}{scaleVaultsTVL_{USD}}
$$

The `scaleAPY` assumes compounding upon vesting of esFCTR (i.e. 90 days esFCTR vesting which equates to`n` â‰ˆ 4):

$$
scaleAPY=\left(1+\frac{scaleAPR}{n}\right)^n-1
$$

## Factor Boost APY

[Factor Boost](../../governance/factor-boost/) rewards are distributed linearly over the period of 7 days from when the reward tokens are deposited. As Factor Boost rewards are only allocated to deposits within the Boost period, the `boostAPR` is calculated using information from the active boost period.&#x20;

$$
boostRewards_{annual} = boostRewards_{second}\times{secondsInYear}
$$

$$
boostAPR = \frac{boostRewards_{second}}{boostVaultsTVL_{USD}}\times{secondsInYear}
$$

The `boostAPY` assumes weekly compounding (i.e. `n` = 52):

$$
boostAPY=\left(1+\frac{boostAPR}{n}\right)^n-1
$$
